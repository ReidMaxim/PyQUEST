<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Profile — PyQuest</title>
    {{ bootstrap.load_css() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('index') }}">PyQuest</a>
      </div>
    </nav>

    <main class="container my-4">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="pyquest-card mb-3">
            <h1 class="h4 mb-3">Your Profile</h1>
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="text-muted">Total Points</div>
                <div class="display-6">{{ total_points }}</div>
              </div>
              <a class="btn btn-primary" href="{{ url_for('index') }}">New Project</a>
            </div>
          </div>

          <div class="pyquest-card">
            <h2 class="h6">Completed Projects</h2>
            {% if completed_projects %}
              <ul class="mb-0">
                {% for p in completed_projects %}
                <li>
                  <a href="{{ url_for('project', project_id=p.id) }}">{{ p.title }}</a>
                </li>
                {% endfor %}
              </ul>
            {% else %}
              <p class="text-muted mb-0">No completed projects yet. Submit valid code to earn points!</p>
            {% endif %}
          </div>
        </div>
      </div>
    </main>

    {{ bootstrap.load_js() }}
  </body>
  </html>

{% extends "bootstrap/base.html" %}
{% block styles %}{{ super() }}<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">{% endblock %}
{% block title %}Profile - PyQuest{% endblock %}
{% block content %}
<div class="container py-5">
  <a href="/" class="btn btn-link">← Home</a>
  <h2 class="mt-2">Your Profile</h2>
  <div class="row mt-4">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Total Points</h5>
          <p class="display-6">{{ profile.total_points }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Completed Projects</h5>
          {% if profile.completed %}
          <ul class="list-group">
            {% for p in profile.completed %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <a href="{{ url_for('project_detail', project_id=p.project_id) }}">{{ p.title }}</a>
              <small class="text-muted">{{ p.last_time }}</small>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <p class="text-muted">No completed projects yet. Generate one from the homepage!</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
